<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CollectionPage",
      "name": "{{ collection.title | escape }}",
      "description": "{{ page_description | escape }}",
      "image": {
        "@type": "ImageObject",
        "height": "{{ collection.image | height }}",
        "url": "{{ collection | img_url}}"
      },
      "url": "{{ shop.url }}{{ collection.url | url_encode }}",
      {%- if collection.products.size > 0 -%}
        "mainEntity": {
            "@type":"ItemList",
            "numberOfItems": {{ collection.products_count }},
            "itemListElement": [
        {%- comment %}<locksmith:5b4a>{% endcomment -%}
          {%- assign locksmith_2897_forloop__size = 0 %}{%- for product in collection.products -%}{% capture var %}{% render 'locksmith-variables', scope: 'subject', subject: product, subject_parent: collection, variable: 'transparent' %}{% endcapture %}{% if var == 'true' %}{% assign locksmith_2897_forloop__size = locksmith_2897_forloop__size | plus: 1 %}{% endif %}{% endfor %}{% assign locksmith_2897_forloop__index = nil -%}
        {%- comment %}</locksmith:5b4a>{% endcomment -%}
        {%- for product in collection.products -%}
        {%- comment %}<locksmith:f2d7>{% endcomment -%}
          {%- capture var %}{% render 'locksmith-variables', scope: 'subject', subject: product, subject_parent: collection, variable: 'transparent' %}{% endcapture %}{% if var == "true" %}{% assign locksmith_5b00_product__available = false %}{% assign locksmith_5b00_product__price = nil %}{% for variant in product.variants %}{% capture var %}{% render 'locksmith-variables', scope: 'subject', subject: variant, subject_parent: product, variable: 'transparent' %}{% endcapture %}{% if var == "true" %}{% else %}{% continue %}{% endif %}{% if locksmith_5b00_product__available == false and variant.available %}{% assign locksmith_5b00_product__available = true %}{% endif %}{% if locksmith_5b00_product__price == nil %}{% assign locksmith_5b00_product__price = variant.price %}{% endif %}{% endfor %}{% if locksmith_2897_forloop__index == nil %}{% assign locksmith_2897_forloop__index = 1 %}{% assign locksmith_2897_forloop__index0 = 0 %}{% else %}{% assign locksmith_2897_forloop__index = locksmith_2897_forloop__index | plus: 1 %}{% assign locksmith_2897_forloop__index0 = locksmith_2897_forloop__index0 | plus: 1 %}{% endif %}{% if locksmith_2897_forloop__index == 1 %}{% assign locksmith_2897_forloop__first = true %}{% else %}{% assign locksmith_2897_forloop__first = false %}{% endif %}{% if locksmith_2897_forloop__index == locksmith_2897_forloop__size %}{% assign locksmith_2897_forloop__last = true %}{% else %}{% assign locksmith_2897_forloop__last = false %}{% endif %}{% assign locksmith_2897_forloop__rindex = locksmith_2897_forloop__size | minus: locksmith_2897_forloop__index | minus: 1 %}{% assign locksmith_2897_forloop__rindex0 = locksmith_2897_forloop__size | minus: locksmith_2897_forloop__index0 | minus: 1 %}{% else %}{% continue %}{% endif -%}
        {%- comment %}</locksmith:f2d7>{% endcomment -%}
        {
          "@type": "ListItem",
          "position": "{{ locksmith_2897_forloop__index }}",
          "item": {
            "@type": "Product",
            "name": {{ product.title | json }},
            "image": "{{ product.featured_image | image_url }}",
            "description": "{{ product.description | strip_html | replace: '"', '' | replace: '‚Äù', '' | strip_newlines }}",
            "url": "{{ shop.url }}{{ product.url }}",
            {%- if product.sku -%}"sku": "{{ product.sku }}",{%- endif -%}
            
          "offers": {
            "@type": "Offer",
            "url": {{ request.origin | append: product.url | json }},
            "priceCurrency": "USD",
            "price": "{{ locksmith_5b00_product__price | money_without_currency | replace: ',', '' }}",
            "itemCondition": "https://schema.org/NewCondition",
            {%- if locksmith_5b00_product__available -%}"availability": "https://schema.org/InStock"
            {%- else -%}"availability": "https://schema.org/OutOfStock"{%- endif -%}
          }
          }
        }{%- unless locksmith_2897_forloop__last -%},{%- endunless -%}
        {%- endfor -%}
        ]
      {%- endif -%}
        }
    }
    </script>



    From quick-view-modal
    {% if template == 'product' %}
        <script type="application/ld+json" id="product-application-json">
          {
            "@context": "http://schema.org/",
            "@type": "Product",
            "name": {{ product.title | json }},
            "url": {{ product.url | json }},
            {% if product.featured_media -%}
              "image": [{{ product.featured_image | image_url | json }}],
            {%- endif %}
            "description": {{ page_description | strip_html | json }},
            {% if current_variant.sku != blank -%}
              "sku": {{ current_variant.sku | json }},
            {%- endif %}
            "brand": {
              "@type": "Brand",
              "name": {{ product.vendor | json }}
            },
            "offers": [
              {%- comment %}<locksmith:2871>{% endcomment -%}
                {%- assign locksmith_0433_forloop__size = 0 %}{% for variant in product.variants -%}{% capture var %}{% render 'locksmith-variables', scope: 'subject', subject: variant, subject_parent: product, variable: 'transparent' %}{% endcapture %}{% if var == 'true' %}{% assign locksmith_0433_forloop__size = locksmith_0433_forloop__size | plus: 1 %}{% endif %}{% endfor %}{% assign locksmith_0433_forloop__index = nil -%}
              {%- comment %}</locksmith:2871>{% endcomment -%}
              {% for variant in product.variants -%}
                {%- comment %}<locksmith:196f>{% endcomment -%}
                  {%- capture var %}{% render 'locksmith-variables', scope: 'subject', subject: variant, subject_parent: product, variable: 'transparent' %}{% endcapture %}{% if var == "true" %}{% if locksmith_0433_forloop__index == nil %}{% assign locksmith_0433_forloop__index = 1 %}{% assign locksmith_0433_forloop__index0 = 0 %}{% else %}{% assign locksmith_0433_forloop__index = locksmith_0433_forloop__index | plus: 1 %}{% assign locksmith_0433_forloop__index0 = locksmith_0433_forloop__index0 | plus: 1 %}{% endif %}{% if locksmith_0433_forloop__index == 1 %}{% assign locksmith_0433_forloop__first = true %}{% else %}{% assign locksmith_0433_forloop__first = false %}{% endif %}{% if locksmith_0433_forloop__index == locksmith_0433_forloop__size %}{% assign locksmith_0433_forloop__last = true %}{% else %}{% assign locksmith_0433_forloop__last = false %}{% endif %}{% assign locksmith_0433_forloop__rindex = locksmith_0433_forloop__size | minus: locksmith_0433_forloop__index | minus: 1 %}{% assign locksmith_0433_forloop__rindex0 = locksmith_0433_forloop__size | minus: locksmith_0433_forloop__index0 | minus: 1 %}{% else %}{% continue %}{% endif -%}
                {%- comment %}</locksmith:196f>{% endcomment -%}
                {
                  "@type" : "Offer",
                  {% if variant.sku != blank -%}
                    "sku": {{ variant.sku | json }},
                  {%- endif %}
                  "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
                  "price" : {{ variant.price | divided_by: 100.00 | json }},
                  "priceCurrency" : {{ cart.currency.iso_code | json }},
                  "url" : {{ shop.url | append: variant.url | json }},
                  "color" : {{ variant.metafields.custom.color | json}},
                  "count": "{{ variant.metafields.custom.count }}"
                }{% unless locksmith_0433_forloop__last %},{% endunless %}
              {%- endfor %}
            ],
           "thing": {
            "product_count": "{{ product.metafields.my_fields.count }}",
            "product_price": "{{ locksmith_5e79_product__price }}"
        }
          }
        </script>
          {% endif %}